<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Wed Jun 25 09:09:03 BST 2025 -->
<title>GranularityHandler</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2025-06-25">
<meta name="description" content="declaration: package: tethys.detection, class: GranularityHandler">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/GranularityHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">tethys.detection</a></div>
<h1 title="Class GranularityHandler" class="title">Class GranularityHandler</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">tethys.detection.GranularityHandler</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="BinnedGranularityHandler.html" title="class in tethys.detection">BinnedGranularityHandler</a></code>, <code><a href="CallGranularityHandler.html" title="class in tethys.detection">CallGranularityHandler</a></code>, <code><a href="EncounterGranularityHandler.html" title="class in tethys.detection">EncounterGranularityHandler</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public abstract class </span><span class="element-name type-name-label">GranularityHandler</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected <a href="../../PamguardMVC/PamDataBlock.html" title="class in PamguardMVC">PamDataBlock</a></code></div>
<div class="col-second even-row-color"><code><a href="#dataBlock" class="member-name-link">dataBlock</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected <a href="../output/StreamExportParams.html" title="class in tethys.output">StreamExportParams</a></code></div>
<div class="col-second odd-row-color"><code><a href="#streamExportParams" class="member-name-link">streamExportParams</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected <a href="../TethysControl.html" title="class in tethys">TethysControl</a></code></div>
<div class="col-second even-row-color"><code><a href="#tethysControl" class="member-name-link">tethysControl</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected <a href="../output/TethysExportParams.html" title="class in tethys.output">TethysExportParams</a></code></div>
<div class="col-second odd-row-color"><code><a href="#tethysExportParams" class="member-name-link">tethysExportParams</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(tethys.TethysControl,PamguardMVC.PamDataBlock,tethys.output.TethysExportParams,tethys.output.StreamExportParams)" class="member-name-link">GranularityHandler</a><wbr>(<a href="../TethysControl.html" title="class in tethys">TethysControl</a>&nbsp;tethysControl,
 <a href="../../PamguardMVC/PamDataBlock.html" title="class in PamguardMVC">PamDataBlock</a>&nbsp;dataBlock,
 <a href="../output/TethysExportParams.html" title="class in tethys.output">TethysExportParams</a>&nbsp;tethysExportParams,
 <a href="../output/StreamExportParams.html" title="class in tethys.output">StreamExportParams</a>&nbsp;streamExportParams)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addChannelsToMap(nilus.Detection,int)" class="member-name-link">addChannelsToMap</a><wbr>(nilus.Detection&nbsp;detection,
 int&nbsp;channelMap)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Function used when creating encounter and binned level detections.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract nilus.Detection[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#addDataUnit(PamguardMVC.PamDataUnit)" class="member-name-link">addDataUnit</a><wbr>(<a href="../../PamguardMVC/PamDataUnit.html" title="class in PamguardMVC">PamDataUnit</a>&nbsp;dataUnit)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Put a data unit into a Detection object.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#autoEffortFix(nilus.Detections,nilus.Detection)" class="member-name-link">autoEffortFix</a><wbr>(nilus.Detections&nbsp;detections,
 nilus.Detection&nbsp;det)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Automatically fix mismatches between effort and detections.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract nilus.Detection[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#cleanup(long)" class="member-name-link">cleanup</a><wbr>(long&nbsp;timeMillis)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Called after end end of all data units to get the last bin / encounter.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#contractDetection(nilus.Detections,nilus.Detection)" class="member-name-link">contractDetection</a><wbr>(nilus.Detections&nbsp;detections,
 nilus.Detection&nbsp;det)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Fix effort / detection problem but contracting the start / end times of the detection</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#effortOverlap(nilus.Detections,nilus.Detection)" class="member-name-link">effortOverlap</a><wbr>(nilus.Detections&nbsp;detections,
 nilus.Detection&nbsp;det)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Check that the detection at least overlaps the effort period.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#expandEffort(nilus.Detections,nilus.Detection)" class="member-name-link">expandEffort</a><wbr>(nilus.Detections&nbsp;detections,
 nilus.Detection&nbsp;det)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Fix effort / detection problem but expanding the start / end times of the effort</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#finaliseChannels(nilus.Detection)" class="member-name-link">finaliseChannels</a><wbr>(nilus.Detection&nbsp;detection)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called to convert a channel map to a lowest channel and to add a user 
 field for the channel map to the detection.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCallGroupName(PamguardMVC.PamDataUnit)" class="member-name-link">getCallGroupName</a><wbr>(<a href="../../PamguardMVC/PamDataUnit.html" title="class in PamguardMVC">PamDataUnit</a>&nbsp;dataUnit)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get a grouping name for the call.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="GranularityHandler.html" title="class in tethys.detection">GranularityHandler</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getHandler(nilus.GranularityEnumType,tethys.TethysControl,PamguardMVC.PamDataBlock,tethys.output.TethysExportParams,tethys.output.StreamExportParams)" class="member-name-link">getHandler</a><wbr>(nilus.GranularityEnumType&nbsp;granularity,
 <a href="../TethysControl.html" title="class in tethys">TethysControl</a>&nbsp;tethysControl,
 <a href="../../PamguardMVC/PamDataBlock.html" title="class in PamguardMVC">PamDataBlock</a>&nbsp;dataBlock,
 <a href="../output/TethysExportParams.html" title="class in tethys.output">TethysExportParams</a>&nbsp;tethysExportParams,
 <a href="../output/StreamExportParams.html" title="class in tethys.output">StreamExportParams</a>&nbsp;streamExportParams)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Create the correct type of granularity handler to put individual data units into 
 Detection objects.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#prepare(long)" class="member-name-link">prepare</a><wbr>(long&nbsp;timeMillis)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Prepare to start, passing the start time of the effort 
 or of the first time bin for binned granularity types.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected nilus.Detection[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toDetectionArray(nilus.Detection)" class="member-name-link">toDetectionArray</a><wbr>(nilus.Detection&nbsp;det)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Convert a single detection to a one element array since that's what' 
 most functions need to return.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="tethysControl">
<h3>tethysControl</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../TethysControl.html" title="class in tethys">TethysControl</a></span>&nbsp;<span class="element-name">tethysControl</span></div>
</section>
</li>
<li>
<section class="detail" id="dataBlock">
<h3>dataBlock</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../PamguardMVC/PamDataBlock.html" title="class in PamguardMVC">PamDataBlock</a></span>&nbsp;<span class="element-name">dataBlock</span></div>
</section>
</li>
<li>
<section class="detail" id="tethysExportParams">
<h3>tethysExportParams</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../output/TethysExportParams.html" title="class in tethys.output">TethysExportParams</a></span>&nbsp;<span class="element-name">tethysExportParams</span></div>
</section>
</li>
<li>
<section class="detail" id="streamExportParams">
<h3>streamExportParams</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../output/StreamExportParams.html" title="class in tethys.output">StreamExportParams</a></span>&nbsp;<span class="element-name">streamExportParams</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(tethys.TethysControl,PamguardMVC.PamDataBlock,tethys.output.TethysExportParams,tethys.output.StreamExportParams)">
<h3>GranularityHandler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">GranularityHandler</span><wbr><span class="parameters">(<a href="../TethysControl.html" title="class in tethys">TethysControl</a>&nbsp;tethysControl,
 <a href="../../PamguardMVC/PamDataBlock.html" title="class in PamguardMVC">PamDataBlock</a>&nbsp;dataBlock,
 <a href="../output/TethysExportParams.html" title="class in tethys.output">TethysExportParams</a>&nbsp;tethysExportParams,
 <a href="../output/StreamExportParams.html" title="class in tethys.output">StreamExportParams</a>&nbsp;streamExportParams)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>tethysControl</code> - </dd>
<dd><code>dataBlock</code> - </dd>
<dd><code>tethysExportParams</code> - </dd>
<dd><code>streamExportParams</code> - </dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="prepare(long)">
<h3>prepare</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">prepare</span><wbr><span class="parameters">(long&nbsp;timeMillis)</span></div>
<div class="block">Prepare to start, passing the start time of the effort 
 or of the first time bin for binned granularity types.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>timeMillis</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addDataUnit(PamguardMVC.PamDataUnit)">
<h3>addDataUnit</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">nilus.Detection[]</span>&nbsp;<span class="element-name">addDataUnit</span><wbr><span class="parameters">(<a href="../../PamguardMVC/PamDataUnit.html" title="class in PamguardMVC">PamDataUnit</a>&nbsp;dataUnit)</span></div>
<div class="block">Put a data unit into a Detection object. for Call granularity
 this will probably return every time. For binned and encounter
 types this will only return at the end of a bin / encounter</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>dataUnit</code> - </dd>
<dt>Returns:</dt>
<dd>Detection object, but only when ready to be added to Detections</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCallGroupName(PamguardMVC.PamDataUnit)">
<h3>getCallGroupName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getCallGroupName</span><wbr><span class="parameters">(<a href="../../PamguardMVC/PamDataUnit.html" title="class in PamguardMVC">PamDataUnit</a>&nbsp;dataUnit)</span></div>
<div class="block">Get a grouping name for the call. This may just be the calls species code, 
 or it may be appended with the channel number. This is used to find bin and 
 encounter data in HashMaps in</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>dataUnit</code> - </dd>
<dt>Returns:</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="cleanup(long)">
<h3>cleanup</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">nilus.Detection[]</span>&nbsp;<span class="element-name">cleanup</span><wbr><span class="parameters">(long&nbsp;timeMillis)</span></div>
<div class="block">Called after end end of all data units to get the last bin / encounter. <p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>timeMillis</code> - end time of effort or last bin in milliseconds.</dd>
<dt>Returns:</dt>
<dd>null for Call granularity, otherwise may be non null for binned or encounter.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toDetectionArray(nilus.Detection)">
<h3>toDetectionArray</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">nilus.Detection[]</span>&nbsp;<span class="element-name">toDetectionArray</span><wbr><span class="parameters">(nilus.Detection&nbsp;det)</span></div>
<div class="block">Convert a single detection to a one element array since that's what' 
 most functions need to return.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>det</code> - </dd>
<dt>Returns:</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="getHandler(nilus.GranularityEnumType,tethys.TethysControl,PamguardMVC.PamDataBlock,tethys.output.TethysExportParams,tethys.output.StreamExportParams)">
<h3>getHandler</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="GranularityHandler.html" title="class in tethys.detection">GranularityHandler</a></span>&nbsp;<span class="element-name">getHandler</span><wbr><span class="parameters">(nilus.GranularityEnumType&nbsp;granularity,
 <a href="../TethysControl.html" title="class in tethys">TethysControl</a>&nbsp;tethysControl,
 <a href="../../PamguardMVC/PamDataBlock.html" title="class in PamguardMVC">PamDataBlock</a>&nbsp;dataBlock,
 <a href="../output/TethysExportParams.html" title="class in tethys.output">TethysExportParams</a>&nbsp;tethysExportParams,
 <a href="../output/StreamExportParams.html" title="class in tethys.output">StreamExportParams</a>&nbsp;streamExportParams)</span></div>
<div class="block">Create the correct type of granularity handler to put individual data units into 
 Detection objects.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>granularity</code> - </dd>
<dd><code>tethysControl</code> - </dd>
<dd><code>dataBlock</code> - </dd>
<dd><code>tethysExportParams</code> - </dd>
<dd><code>streamExportParams</code> - </dd>
<dt>Returns:</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="autoEffortFix(nilus.Detections,nilus.Detection)">
<h3>autoEffortFix</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">autoEffortFix</span><wbr><span class="parameters">(nilus.Detections&nbsp;detections,
 nilus.Detection&nbsp;det)</span></div>
<div class="block">Automatically fix mismatches between effort and detections. This will be called if a 
 detection or part of a detection is outside of the start and end defined by the effort. If it's a 
 small difference, i.e. if the detection at least overlaps the effort then it can be automatically 
 fixed by truncating the detection (for binned types) or by a small extension to the effort (for encounter
 and call types).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>detections</code> - nilus Detections object</dd>
<dd><code>det</code> - a single detection</dd>
<dt>Returns:</dt>
<dd>true if it was fixed automatically. False otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="effortOverlap(nilus.Detections,nilus.Detection)">
<h3>effortOverlap</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">effortOverlap</span><wbr><span class="parameters">(nilus.Detections&nbsp;detections,
 nilus.Detection&nbsp;det)</span></div>
<div class="block">Check that the detection at least overlaps the effort period.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>detections</code> - nilus Detections object</dd>
<dd><code>det</code> - a single detection</dd>
<dt>Returns:</dt>
<dd>true if the overlap</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addChannelsToMap(nilus.Detection,int)">
<h3>addChannelsToMap</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">addChannelsToMap</span><wbr><span class="parameters">(nilus.Detection&nbsp;detection,
 int&nbsp;channelMap)</span></div>
<div class="block">Function used when creating encounter and binned level detections. During the 
 building of these, we need to accumulate a channel map. Then at the end of the 
 encounter or bin, we're going to call a different function to change the 
 channel number to the lowest and also set the channel map as a user field.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>detection</code> - </dd>
<dd><code>channelMal</code> - </dd>
<dt>Returns:</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="finaliseChannels(nilus.Detection)">
<h3>finaliseChannels</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">finaliseChannels</span><wbr><span class="parameters">(nilus.Detection&nbsp;detection)</span></div>
<div class="block">Called to convert a channel map to a lowest channel and to add a user 
 field for the channel map to the detection. <br>
 Only use this if you're sure you've been accumulating channel maps, not setting
 channel numbers as you created detections.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>current overall map/</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="contractDetection(nilus.Detections,nilus.Detection)">
<h3>contractDetection</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">contractDetection</span><wbr><span class="parameters">(nilus.Detections&nbsp;detections,
 nilus.Detection&nbsp;det)</span></div>
<div class="block">Fix effort / detection problem but contracting the start / end times of the detection</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>detections</code> - nilus Detections object</dd>
<dd><code>det</code> - a single detection</dd>
<dt>Returns:</dt>
<dd>true if fixed automatically</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="expandEffort(nilus.Detections,nilus.Detection)">
<h3>expandEffort</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">expandEffort</span><wbr><span class="parameters">(nilus.Detections&nbsp;detections,
 nilus.Detection&nbsp;det)</span></div>
<div class="block">Fix effort / detection problem but expanding the start / end times of the effort</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>detections</code> - nilus Detections object</dd>
<dd><code>det</code> - a single detection</dd>
<dt>Returns:</dt>
<dd>true if fixed automatically</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
